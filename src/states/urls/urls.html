<div flex-gt-md="50"
     flex-gt-sm="90">

    <form name="urlForm" novalidate>

        <md-card ng-disabled="vm.isSaving">
            <md-card-content>
                <h2 class="md-title">Sharing a URL</h2>

                <md-input-container>
                    <label>URL to share</label>
                    <input ng-model="vm.inputUrl"
                           required
                           name="url"
                           type="url"
                           ng-pattern="/http://www.100shapes.com/*/">

                    <div ng-messages="urlForm.url.$error"
                         ng-if="urlForm.url.$touched">
                        <div ng-message="required">Whoa there! You <b>need</b> to fill me in.</div>
                        <div ng-message="pattern">Whoa there! I only shorten URLs for <b>100 Shapes</b>.</div>
                    </div>
                </md-input-container>

                <md-autocomplete flex required
                                 md-input-name="campaign"
                                 md-search-text="vm.params.campaign"
                                 md-items="campaign in vm.allCampaigns()"
                                 md-item-text="campaign.name"
                                 md-floating-label="Add a campaign">
                    <md-item-template>
                        <span md-highlight-text="vm.params.campaign"
                              md-highlight-flags="^i">
                            {{ campaign.name }}
                        </span>
                    </md-item-template>

                    <div ng-messages="urlForm.campaign.$error"
                         ng-if="urlForm.campaign.$touched">

                        <div ng-message="required">You <b>must</b> provide a campaign.</div>
                    </div>
                </md-autocomplete>


                <md-autocomplete flex required
                                 md-input-name="source"
                                 md-search-text="vm.params.source"
                                 md-items="source in vm.allSources()"
                                 md-item-text="source.name"
                                 md-floating-label="Where are you sharing? i.e. 'Twitter'">
                    <md-item-template>
                        <span md-highlight-text="vm.params.source"
                              md-highlight-flags="^i">
                            {{ source.name }}
                        </span>
                    </md-item-template>

                    <div ng-messages="urlForm.source.$error"
                         ng-if="urlForm.source.$touched">
                        <div ng-message="required">You <b>must</b> provide a source.</div>
                    </div>
                </md-autocomplete>

                <md-autocomplete flex required
                                 md-input-name="medium"
                                 md-search-text="vm.params.medium"
                                 md-items="medium in vm.allMediumsForSource(vm.params.source)"
                                 md-item-text="medium.$value"
                                 md-floating-label="As a what? i.e. 'post'">
                    <md-item-template>
                        <span md-highlight-text="vm.params.medium"
                              md-highlight-flags="^i">
                            {{ medium.$value }}
                        </span>
                    </md-item-template>

                    <div ng-messages="urlForm.medium.$error"
                         ng-if="urlForm.medium.$touched">
                        <div ng-message="required">You <b>must</b> provide a medium.</div>
                    </div>
                </md-autocomplete>


            </md-card-content>

            <div class="md-actions" layout="row" layout-align="end center">
                <md-button ng-click="vm.create()"
                           ng-disabled="urlForm.$invalid"
                           class="md-raised md-primary">

                    Create
                </md-button>

                <md-button ng-click="vm.reset()">
                    Reset
                </md-button>
            </div>
        </md-card>

        <md-card ng-if="vm.outputUrl">
            <md-card-content>
                <h2 class="md-title">Share this</h2>
                <md-input-container>
                    <label>
                        Short URL
                    </label>
                    <input type="url"
                           ng-model="vm.outputUrl"/>
                </md-input-container>
            </md-card-content>
        </md-card>

    </form>

</div>


